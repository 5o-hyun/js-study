# 스코프란?

변수의 유효범위

# 스코프를 사용하는 이유

같은 이름을 갖는 변수가 충돌을 일으켜, 프로그램 전체에서 하나밖에 사용할수없다.

# 스코프의 종류

## 1. 전역스코프

전역스코프는 함수외부에서 선언된 변수로 프로그램전체에서 접근할수있다.

## 2. 지역스코프 ( 블록스코프 )

지역스코프는 함수내부에서 선언된 변수로 함수가 실행되면 만들어지고 함수가 종료되면 소멸하는 변수다.<br/>
함수외부에서 접근할수없다.<br/>

> 전역스코프와 지역스코프의 차이<br/>
> 전역스코프 : 전체에서 접근가능<br/>
> 지역스코프 : 외부에서 내부호출 x, 내부에서 외부호출 o => 메모리를 효율적으로 쓰기위해 사용

```
var a = 1;
(function result() {
  let b = 2;
  function inner() {
    let c = 3;
    console.log(b); // 2 함수 내부에서 외부호출 가능
  }
  inner();
    console.log(c); // error 함수 외부에서 내부로 호출 불가능
})();
console.log(a); // 1
console.log(b); // error
```

# 스코프체인

함수 내부에서 외부호출시 해당 블록에서 못찾아서 외부로 나가서 찾는다.<br/>
이 모습이 체인과 비슷하다.<br/>

```
const a = "global";
function outer() {
  const b = "outer";
  function inner() {
    const c = "inner";
    console.log(c); // inner
    console.log(a); // global
  }
  inner();
}
outer();
// c a 인, inner global 출력
```

<img src="https://velog.velcdn.com/images%2F5o_hyun%2Fpost%2F298d9325-5b5a-4343-a6a4-98cfaf67fade%2F%EC%A7%80%EC%97%AD%EB%B3%80%EC%88%98.jpg">

^ 체인형태

# 전역변수의 문제점

전역변수는 프로그램 전체에서 접근할수있어 코드의 오염이 쉽다.<br/>
따라서 가능한 지역변수를 사용한다.<br/>

## 1. 암묵적결합

전역변수는 프로그램 전체에서 사용이 가능하므로, 모든코드가 전역변수를 참조하고 변경할수있는 암묵적결합을 허용하는것이다.

## 2. 스코프 가장 꼭대기에 존재

전역변수는 스코프체인의 가장 종점에 존재한다.<br/>
중첩되었을때 스코프를 계속 타고가야하므로 검색속도가 느리다.<br/>

## 3. 네임스페이스오염

자바스크립트는 파일이 분리되어있어도 전역스코프를 공유하므로, 같은 이름의 전역변수를 사용시 예상치못한결과를 가져올수있다.

# 전역변수 사용억제방밥

## 1. 지역변수사용

변수의 스코프는 좁으면 좁을수록 좋으므로 지역변수사용

## 2. 즉시실행함수로 감싸기

모든 코드를 즉시실행함수로 감싸면 모든 변수는 즉시실행함수의 지역변수가된다

```
(function () {
  const a = "즉시실행함수의 지역변수";
  console.log(a); // 즉시실행함수의 지역변수
})();
```
